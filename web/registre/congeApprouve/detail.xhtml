<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <ui:composition>
        <!-- Datatables Block -->
        <!-- Datatables is initialized in js/pages/uiTables.js -->
        <div id="modal-large" class="modal" tabindex="-1" role="dialog" aria-hidden="true" style="display: none;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <form jsf:id="detailsDialogForm" jsf:prependId="false">
                        <div class="modal-header" style="border-bottom:1px solid #ffcccc;">
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                            <h4 class="blue bigger" style="color: #ff6666;">Gestion de dossier </h4>
                        </div>
                        <div class="row tabbable">

                            <div class="col-sm-2 " >

                                <ul class="nav nav-tabs tabs-left" id="myTab3" style="width: 10em;">
                                    <li class="active">
                                        <a data-toggle="tab" href="#home3">
                                            <i class="pink ace-icon fa fa-tachometer bigger-110" style="color: #ff6666;"></i>
                                            #{bundle.Dossier}
                                        </a>
                                    </li>

                                    <li>
                                        <a data-toggle="tab" href="#profile3">
                                            <i class="blue ace-icon fa fa-user bigger-110" style="color:#3399ff;"></i>
                                            #{bundle.Audience}
                                        </a>
                                    </li>

                                    <li>
                                        <a data-toggle="tab" href="#dropdown13">
                                            <i class="ace-icon fa fa-rocket"></i>
                                            #{bundle.Evenement}
                                        </a>
                                    </li>
                                </ul>
                                <!--                                <div style=" width: 10em; border-right: 1px solid #ddd; margin-top: -2px;"></div>-->
                            </div>
                            <div class="col-sm-10">
                                <div class="tab-content" style=" margin-left: -1em;">
                                    <div id="home3" class="tab-pane active">
                                        <div class="row">
                                            <div class="col-sm-6" style="border: 0px solid black">
                                                <div class="" >
                                                    <div class="widget-body">

                                                        <div class="" >

                                                            <table class="table table-striped table-bordered table-vcenter" style="margin-left: 1em; ">

                                                                
                                                                <tbody>
                                                                    <tr>
                                                                        <th style="font-weight:bold;">Origine de procédure</th>
                                                                        <th>#{progressionDossierBean.selectedDossier1.origineProcedure.label}</th>
                                                                    </tr>
                                                                   <tr jsf:rendered="#{progressionDossierBean.selectedDossier1.numeroRP!=null}">
                                                                        <td style="font-weight:bold;" >NuméroRP</td>
                                                                        <td style="font-weight:bold;">#{progressionDossierBean.selectedDossier1.numeroRP}</td>
                                                                    </tr>
                                                                    <tr jsf:rendered="#{progressionDossierBean.selectedDossier1.numeroRI!=null}">
                                                                        <td style="font-weight:bold;" >NuméroRI</td>
                                                                        <td style="font-weight:bold;">#{progressionDossierBean.selectedDossier1.numeroRI}</td>
                                                                    </tr>
                                                                    <tr jsf:rendered="#{progressionDossierBean.selectedDossier1.numeroPG!=null}">
                                                                        <td style="font-weight:bold;" >NuméroPG</td>
                                                                        <td style="font-weight:bold;">#{progressionDossierBean.selectedDossier1.numeroPG}</td>
                                                                    </tr>
                                                                    <tr jsf:rendered="#{progressionDossierBean.selectedDossier1.numeroCA!=null}">
                                                                        <td style="font-weight:bold;" >NuméroCA</td>
                                                                        <td style="font-weight:bold;">#{progressionDossierBean.selectedDossier1.numeroCA}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td>Statut</td>
                                                                        <td class="bolder">#{progressionDossierBean.statut}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Position actuelle</td>
                                                                        <td>#{progressionDossierBean.servicecourant}<!--le serrvice courant--></td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Date de saisine</td>
                                                                        <td>#{connexionBean.convertDateHeure(progressionDossierBean.selectedDossier1.dateSaisine)}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Date de forfait</td>
                                                                        <td >#{connexionBean.convertDateHeure(progressionDossierBean.selectedDossier1.dateForfait)}</td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Infraction(s)</td>
                                                                        <td>
                                                                            <table class="table table-bordered " style="border:1px solid gainsboro;" jsf:id="gestion">
                                                                                <h:panelGroup rendered="#{not empty  progressionDossierBean.selectedDossier1.infractionsInitiales}"> 
                                                                                    <ui:repeat value="#{progressionDossierBean.selectedDossier1.infractionsInitiales}" var="inf" varStatus="status">
                                                                                        <tr>
                                                                                            <td>#{inf.infraction.libelle} </td>

                                                                                        </tr>
                                                                                    </ui:repeat>
                                                                                </h:panelGroup>
                                                                            </table>
                                                                        </td>
                                                                    </tr>
                                                                    <tr>
                                                                        <td style="font-weight:bold;">Date de création</td>
                                                                        <td>#{connexionBean.convertDateHeure(progressionDossierBean.selectedDossier1.dateCreation)}</td>
                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>

                                           <div class="col-sm-6" style="border: 0px solid black;">
                                                <div class="">

                                                    <div class="widget-body" style=" margin-top: 15px;">
                                                        <div class="widget-main" style="border: 0px solid black;padding-top: 0px;padding-left: 0px;padding-bottom: 0px;padding-right: 10px;">
                                                            <table class="table table-bordered">
                                                                <tbody>
                                                                    <tr>
                                                                        <td style="">
                                                                            <h:panelGroup rendered="#{not empty  progressionDossierBean.victimes}">
                                                                                <ui:repeat var="partie" value="#{progressionDossierBean.victimes}">
                                                                                    #{partie.name} (Victime)
                                                                                </ui:repeat>
                                                                            </h:panelGroup>
                                                                            <h:panelGroup rendered="#{empty progressionDossierBean.victimes}">
                                                                                Aucune victime
                                                                            </h:panelGroup>
                                                                        </td>

                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="space-1"></div>
                                                <div class="">

                                                     <div class="widget-body" style="margin-left: 0px;">
                                                        <div class="widget-main" style="border: 0px solid black;padding-top: 0px;padding-left: 0px;padding-bottom: 0px;padding-right: 10px;">
                                                            <table class="table table-bordered">

                                                                <tbody>
                                                                    <tr>
                                                                        <td style="width: 80%;">
                                                                            <h:panelGroup rendered="#{not empty progressionDossierBean.auteurs }">                                                                
                                                                                <ui:repeat var="partie" value="#{progressionDossierBean.auteurs}">
                                                                                    <table class="table table-bordered">
                                                                                        <th>Auteur (s)</th>
                                                                                        <th>Statut</th>
                                                                                         <th>Infraction(s)</th>
                                                                                        <tbody>
                                                                                            <tr>
                                                                                                <td><center>#{partie.name}</center></td>
                                                                                                <td><center>#{progressionDossierBean.StatutAuteur(partie)}</center></td>
                                                                                                <td>
                                                                                                    <ul>
                                                                                                    <ui:repeat value="#{progressionDossierBean.listInfractionSpecifique(partie)}" var="infra">
                                                                                                        <li> #{infra.infraction.libelle}</li>
                                                                                                    </ui:repeat>
                                                                                                    </ul>
                                                                                                </td>
                                                                                            </tr>
                                                                                        </tbody>
                                                                                    </table>
                                                                                </ui:repeat>
                                                                            </h:panelGroup>
                                                                            <h:panelGroup rendered="#{empty progressionDossierBean.auteurs}">
                                                                                Aucun auteur
                                                                            </h:panelGroup>
                                                                        </td>

                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                             <table class="table table-bordered">

                                                                <tbody>
                                                                    <tr>
                                                                        <td><center><i class="gi gi-hand_right"></i></center></td>
                                                                        <td style="width: 80%;">
                                                                            <h:panelGroup rendered="#{progressionDossierBean.selectedProgressionDossier1.observation!=null}">                                                                

                                                                               #{progressionDossierBean.selectedProgressionDossier1.observation}

                                                                            </h:panelGroup>
                                                                            <h:panelGroup rendered="#{progressionDossierBean.selectedProgressionDossier1.observation==null}">
                                                                                Aucune observation en cours
                                                                            </h:panelGroup>
                                                                        </td>

                                                                    </tr>
                                                                </tbody>
                                                            </table>
                                                                    <br/><br/>
                                                            <a class="btn btn-success" href="/forsetiPenal/detaildocumentfromdossier/index.xhtml?id=#{progressionDossierBean.selectedDossier1.id}" id="visDoc" style="width: 25.5em;">  
                                                               <i class="fa fa-folder-open-o"></i>
                                                                Visualiser les documents
                                                            </a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </div><!--home-->

                                    <div id="profile3" class="tab-pane">                                          
                                        <div class="widget-body">

                                            <div style="margin-left: 2em; margin-top: 1em; margin-bottom: 1em; width:50em;">
                                                <table jsf:id="table-dossier-audiencer-rp" class="table table-striped table-bordered table-vcenter" >
                                                    <thead>
                                                        <tr>
                                                            <th style="color:#3399ff;">Date d'audience</th>
                                                            <th style="color:#3399ff;">Salle</th>
                                                        </tr>
                                                    </thead>

                                                    <tbody>
                                                        <ui:repeat value="#{progressionDossierBean.getlisteAudiencce(progressionDossierBean.selectedDossier1)}" var="item" varStatus="status">
                                                            <tr>
                                                                <td>#{connexionBean.convertDateHeure(item.date)}</td>
                                                                <td>#{progressionDossierBean.salle}</td>
                                                            </tr>
                                                        </ui:repeat>
                                                    </tbody>
                                                </table>
                                            </div>


                                        </div>
                                    </div>

                                    <div id="dropdown13" class="tab-pane" style="border: 0px solid black">
                                        <div class="widget-body" style="margin-left: 2em; margin-top: 1em; margin-bottom: 1em; width:50em;">


                                          <table id="dynamic-table-event-EnCour"  class="table table-striped table-bordered table-vcenter"  >
                                                <thead>
                                                    <tr>
                                                        <th>Numero</th>
                                                        <th>#{bundle.Evenement}</th>
                                                        <th>#{bundle.DateEvenement}</th>
                                                        <th>#{bundle.effectuerPar}</th>
                                                        <th>#{bundle.Audience}</th>
                                                        <th>#{bundle.utilisateurDesti}</th>

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <ui:repeat value="#{progressionDossierBean.getListeEvenement(progressionDossierBean.selectedDossier1)}" var="item" varStatus="statut">
                                                        <tr> 
                                                            <td>#{(statut.index)+1}</td>
                                                            <td style=";font-weight:bold;">#{item.evenement.libelle}</td>
                                                            <td style="font-weight:bold;">#{connexionBean.convertDateHeure(item.evenement.dateCreation)}</td>
                                                            <td style="font-weight:bold;">#{item.serviceExpediteur.libelle}</td>
                                                            <td style="font-weight:bold;">
                                                                <h:panelGroup rendered="#{not empty item.audience }"> 
                                                                    #{connexionBean.convertDate(item.audience.date,"dd-MM-yyyy")}
                                                                </h:panelGroup>
                                                                <h:panelGroup rendered="#{empty item.audience}">
                                                                    <center>--</center>
                                                                </h:panelGroup>
                                                            </td>
                                                            <td style="font-weight:bold;">#{item.utilisateurDestinataire.nomPrenoms}</td>
                                                        </tr>
                                                    </ui:repeat>


                                                </tbody>
                                            </table>



                                        </div>
                                    </div>

                                </div>
                            </div><!-- /.col -->


                        </div><!-- /.row -->
                        <div class="modal-footer">


                            <button class="btn btn-default btn-lg active" style="line-height: 1.5; font-size: 12px; padding: 5px 10px;" data-dismiss="modal" >
                                <i class="ace-icon fa fa-times"></i>
                                #{bundle.Close}
                            </button>

                        </div>

                    </form>
                </div>
            </div>
        </div>
        <!-- END Datatables Block -->

        <script>
//            $(function () {
//                $('#functions-datatable').dataTable({
//                    columnDefs: [{orderable: false, targets: [4]}],
//                    pageLength: 10,
//                    lengthMenu: [[5, 10, 20], [5, 10, 20]]
//                });
//            });
        </script>
    </ui:composition>
</html>
