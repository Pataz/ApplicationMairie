<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:jsf="http://xmlns.jcp.org/jsf"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <ui:composition>
        <div class="hidden page" id="page-audience">
            <!-- Forms Components Header -->
            <div class="content-header">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="header-section">
                            <h1 style="font-family:Century">Gestion des evènements</h1>
                        </div>
                    </div>
                    <div class="col-sm-6 hidden-xs">
                        <div class="header-section">
                            <ul class="breadcrumb breadcrumb-top">
                               
                                <li>Gestion evènements</li>
                                <li>Calendrier evènements</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <!-- END Forms Components Header -->
            <!--<div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2 col-lg-6 col-lg-offset-3">-->
            <div class="row">
                <h:form id="msgFormPage" prependId="false">
                    <h:messages id="msgPage" style="display: none;" errorClass="erreurmessage" infoClass="succesmessage" showDetail="true"/>
                    <p:messages  autoUpdate="true" showDetail="true"/>
                </h:form>
                <div class="col-md-1">

                </div>
                <div class="col-md-10">
                    <div id="view">
                        <div class="block center-block">
                            <!-- Clickable Wizard Title -->
                            <form  jsf:id="enteteId" jsf:prependId="false" class="center-table">
                                <div class="block-title">
                                    <div class="form-group pull-right">
                                        <!--<a href="javascript:void(0)" class="btn btn-effect-ripple btn-warning" data-toggle="tooltip" title="Back"><i class="gi gi-left_arrow"></i>#{bundle.retourCalendrier}</a>-->
                                        <!--                                        <button class="btn btn-effect-ripple btn-warning" id="btn-back">
                                                                                    <i class="gi gi-left_arrow"></i>
                                        #{bundle.retourCalendrier}
                                    </button>-->
                                        <a href="/forsetiPenal/audience/gestion/index.xhtml" class="btn btn-effect-ripple btn-warning">
                                             <i class="ace-icon fa fa-arrow-left"></i> 
                                            #{bundle.retourCalendrier}
                                           
                                        </a>
                                        <div class="btn-group">
                                            <a href="javascript:void(0)" class="btn btn-effect-ripple btn-primary dropdown-toggle enable-tooltip" data-toggle="dropdown" ><i class="fa fa-chevron-down">#{bundle.Action}</i></a>
                                            <ul class="dropdown-menu dropdown-menu-right">
                                                <li>
                                                    <h:commandLink   onclick="$('#editAudienceDialog').modal('show')" immediate="true">
                                                        <i class="gi gi-edit"></i>
                                                        #{bundle.ModifierAud}
                                                        <f:ajax render=":editAudienceForm" event="click" onevent="globaledit"/>
                                                    </h:commandLink>
                                                </li>
                                                <li>
                                                    <h:commandLink   onclick="$('#deplacerAudienceDialog').modal('show')">
                                                        <i class="fa fa-reply"></i>
                                                        #{bundle.DeplacerAud}
                                                        <f:ajax listener="#{audienceBean.passItem()}" render=":deplacerAudienceForm" event="click" onevent="globaledit"/>
                                                    </h:commandLink>
                                                </li>
                                                <li>
                                                    <h:commandLink   onclick="$('#supprimerAudienceDialog').modal('show')">
                                                        <i class="fa fa-reply"></i>
                                                        Supprimer l'audience
                                                        <f:ajax listener="#{audienceBean.passItem()}" render=":supprimerAudienceForm" event="click" onevent="globaledit"/>
                                                    </h:commandLink>
                                                </li>
                                             
                                            </ul>
                                        </div>
                                    </div>
                                    <h2>#{bundle.ParametreAudience}</h2>
                                </div>
                            </form>
                            <div class="table-responsive">
                                <ui:include src="page_audience_Entete_Audience_Ordinaire.xhtml"/>
                                <!-- END Clickable Wizard Content -->
                            </div> 
                        </div>
                    </div>
                    <!-- Clickable Wizard Block -->
                </div>
                <div class="col-md-1">

                </div>
            </div> 

            <div class="row">
                <div class="col-md-1">

                </div>
                <div class="col-md-10">
                    <!-- Clickable Wizard Block -->
                    <div class="block center-block">
                        <!-- Clickable Wizard Title -->
                        <div class="block-title">
                            <div class="block-options pull-right">
                                <!--                                <a href="javascript:void(0)" class="btn btn-effect-ripple btn-warning" data-toggle="tooltip" title="Back"><i class="gi gi-refresh"></i></a>-->
                                <!--                                <div class="btn-group">
                                                                    <a href="javascript:void(0)" class="btn btn-effect-ripple btn-primary dropdown-toggle enable-tooltip" data-toggle="dropdown" title="Extras"><i class="fa fa-chevron-down">#{bundle.Action}</i></a>
                                                                    <ul class="dropdown-menu dropdown-menu-right">
                                                                        <li>
                                                                            <a href="javascript:void(0)">
                                                                                <i class="gi gi-cloud-download pull-right"></i>
                                                                                Download
                                                                            </a>
                                                                        </li>
                                                                        <li>
                                                                            <a href="javascript:void(0)">
                                                                                <i class="gi gi-video_hd pull-right"></i>
                                                                                HD Videos
                                                                            </a>
                                                                        </li>
                                                                        <li class="divider"></li>
                                                                        <li>
                                                                            <a href="javascript:void(0)">
                                                                                <i class="gi gi-wifi fa-fw pull-right"></i>
                                                                                Wifi
                                                                            </a>
                                                                        </li>
                                                                    </ul>
                                                                </div>-->
                            </div>
                            <h2>#{bundle.listDossier}</h2>
                        </div>

                        <h:form role="form"  id="audienceForm" class="form-horizontal ">
                            <div class="form-group" style="padding-bottom: 5px">
                                <div class="col-sm-2" style="width: 40%">

                                </div>
                                <div class="col-sm-12" style="width: 60%;">

                                    <h:commandLink style="padding: 8px; margin-right: 5px;" styleClass="btn btn-success btn-sm btn-round " onclick="$('#comparutionDialog').modal()">
                                        <i class=""></i>Comparution
                                        <f:ajax listener="#{audienceBean.comparutionPartie(audienceBean.selectedChambre, audienceBean.selectedAudience)}" render=":comparutionDialogForm"  onevent="comparution" event="click"/>
                                    </h:commandLink>

                                    <h:commandLink style="padding: 8px;" styleClass="btn btn-success btn-sm btn-round"
                                                   title="#{bundle.RoleAudience}"
                                                   action="#{audienceBean.printRole()}">#{bundle.RoleAudience}
                                        <i class="ace-icon fa fa-print"></i>
                                    </h:commandLink>

<!--                                    <button type="button" class="btn btn-success"><i class="gi gi-plus"></i>#{bundle.Audiencement}</button>-->
                                    <h:commandLink style="margin-left: 5px;" class="btn btn-warning" onclick="$('#modalCondamnation').modal('show')"><i class="gi gi-classic_hammer"></i>
                                        #{bundle.condamnation} 
                                        <f:ajax listener="#{audienceBean.listeDossiersDaudience(audienceBean.selectedAudience)}" render=":condamnerForm :relaxerForm" onevent="detail" />
                                    </h:commandLink>


                                    <div class="btn-group">
                                        <a href="javascript:void(0)" data-toggle="dropdown" class="btn btn-warning dropdown-toggle">#{bundle.Decision}<span class="caret"></span></a>
                                        <ul class="dropdown-menu text-left">
                                            <li>
                                                <a  class="open-orienter-renvoi"  href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceRenvoie}
                                                </a>

                                            </li>
                                            <li>
                                                <a  class="open-orienter-renvoiferme"  href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceRenvoieferme}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="open-orienter-juge" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceJuge}
                                                </a>

                                            </li>
                                            <li>
                                                <a class="open-orienter-delibere" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceMiseDelibere}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="open-orienter-proroger" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceProroger}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="open-orienter-rabattre" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceRabattre}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="open-orienter-radier" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceRadiation}
                                                </a>
                                            </li>
                                            <li>
                                                <a class="open-orienter-add" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.ADD}
                                                </a>

                                            </li>
                                            <li>
                                                <a class="open-orienter-incompetence" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.Incompetence}
                                                </a>

                                            </li>
                                            <!--                                            <li>
                                                                                            <a href="javascript:void(0)">
                                                                                                <i class="fa fa-cog pull-right"></i>
                                                                                                Jonction
                                                                                            </a>
                                                                                        </li>-->
                                            <li>
                                                <a class="open-orienter-cloturer" href="#">
                                                    <i class="ace-icon fa fa-gavel"></i> #{bundle.AudienceVider}
                                                </a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                        </h:form>      
                        <form jsf:id="tableDossiersForm" jsf:prependId="false" class="center-table">
                            <!--<div class="col-sm-12" style="padding-top: 10px;padding-left:10px;padding-right:10px">-->
                            <!--<div class="table-responsive">-->
                            <table jsf:id="tableDossiers" class="table table-striped table-bordered table-vcenter">
                                <thead>
                                    <tr>
                                        <th style="font-size: 13px">#{bundle.NumeroDossier}</th>
                                        <th style="font-size: 13px">#{bundle.Statut}</th>
                                        <th style="font-size: 13px">#{bundle.Infractions}</th>
                                        <th style="font-size: 13px">#{bundle.Victime}</th>
                                        <th style="font-size: 13px">#{bundle.Auteur}</th>
                                        <th style="font-size: 13px">#{bundle.Temoin}</th>
                                        <th style="font-size: 13px">#{bundle.DateForfait}</th> 
                                        <th style="font-size: 13px">#{bundle.Action}</th> 

                                    </tr>    
                                </thead>
                                <tbody>
                                    <ui:repeat value="#{audienceBean.listeDossiers}" var="item" varStatus="status">
                                        <tr>
                                            <td jsf:rendered="#{item.dossier.numeroRP!=null}">#{item.dossier.numeroRP}</td>
                                             <td jsf:rendered="#{item.dossier.numeroPG!=null}">#{item.dossier.numeroPG}</td>
                                            <td>#{item.statut.libelle}</td>
                                            <td>
                                                <ul>
                                                    <ui:repeat var="infracInitiale" value="#{item.dossier.infractionsInitiales}">
                                                        <li>#{infracInitiale.infraction.libelle}</li>
                                                    </ui:repeat>
                                                </ul>
                                            </td>
                                            <td>
                                                <ul>
                                                    <ui:repeat var="partie" value="#{partieBean.getPartiesDossierType(item.dossier.id, 'Vic')}">
                                                        <li>#{partie.personne.name}</li>
                                                    </ui:repeat>
                                                </ul>
                                            </td>
                                            <td>
                                                <ul>
                                                    <ui:repeat var="partie" value="#{partieBean.getPartiesDossierType(item.dossier.id, 'Aut')}">
                                                        <li>#{partie.personne.name}</li>
                                                    </ui:repeat>
                                                </ul>
                                            </td>
                                            <td>
                                                <ul>
                                                    <ui:repeat var="partie" value="#{partieBean.getPartiesDossierType(item.dossier.id, 'Tem')}">
                                                        <li>#{partie.personne.name}</li>
                                                    </ui:repeat>
                                                </ul>
                                            </td>
                                            <td>#{ connexionBean.convertDate(item.dossier.dateForfait)}</td>                                            
                                            <td>
                                                <h:commandLink style="padding: 8px; margin-right: 5px;" styleClass="btn btn-success btn-sm btn-round " onclick="$('#detailsDossierDialog').modal('show')">
                                                    <i class=""></i>#{bundle.Detail}
                                                    <f:ajax listener="#{progressionDossierBean.passItem(item.dossier)}" render=":test:detailsDossierDialogForm"  onevent="showDetail" event="click"/>
                                                </h:commandLink>
                                            </td>
                                        </tr>
                                    </ui:repeat>
                                </tbody>
                            </table>
                            <!--</div>-->
                            <!--</div>-->
                        </form>
                    </div>
                    <!-- END Clickable Wizard Content -->
                </div>     
            </div>
            <div class="col-md-1">

            </div>
        </div> 
    </ui:composition>
</html>
